<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federation Log Analysis Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --text-primary: #eee;
            --text-secondary: #aaa;
            --accent: #e94560;
            --accent2: #00d9ff;
            --accent3: #00ff88;
            --border: #333;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
        }
        .container { max-width: 1600px; margin: 0 auto; }
        h1 {
            text-align: center;
            color: var(--accent2);
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .summary-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid var(--accent);
        }
        .summary-card.accent2 { border-left-color: var(--accent2); }
        .summary-card.accent3 { border-left-color: var(--accent3); }
        .summary-card h3 { color: var(--text-secondary); font-size: 0.9em; margin-bottom: 5px; }
        .summary-card .value { font-size: 2em; font-weight: bold; color: var(--text-primary); }
        .chart-container {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .chart-title {
            color: var(--accent2);
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }
        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
        }
        .server-section {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid var(--accent);
        }
        .server-title {
            color: var(--accent);
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: var(--bg-card);
            color: var(--accent2);
        }
        tr:hover { background: rgba(255,255,255,0.05); }
        .highlight { color: var(--accent); font-weight: bold; }
        .warning { color: #ffcc00; }
        .critical { color: #ff4444; }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 10px 20px;
            background: var(--bg-card);
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }
        .tab:hover, .tab.active {
            background: var(--accent);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .fed-group-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .fed-group-card {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .fed-group-card h4 { color: var(--accent2); margin-bottom: 10px; }
        .fed-group-card .stores { color: var(--text-secondary); font-size: 0.9em; }
        .fed-group-card .disconnects { font-size: 1.4em; font-weight: bold; }
        canvas { max-height: 400px; }
        .insights {
            background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid var(--accent3);
        }
        .insights h2 { color: var(--accent3); margin-bottom: 15px; }
        .insights ul { margin-left: 20px; }
        .insights li { margin-bottom: 10px; }
        .comparison-table th { text-align: center; }
        .comparison-table td { text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Federation Log Analysis Report</h1>
        <p class="subtitle">Multi-Server Analysis | Generated: January 14, 2026 | Analyzer: v3 Streaming</p>

        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="summary-card">
                <h3>Servers Analyzed</h3>
                <div class="value">4</div>
            </div>
            <div class="summary-card accent2">
                <h3>Total Log Files</h3>
                <div class="value">10,067</div>
            </div>
            <div class="summary-card accent3">
                <h3>Total Lines Processed</h3>
                <div class="value">557M</div>
            </div>
            <div class="summary-card">
                <h3>Total Stores</h3>
                <div class="value">3,692</div>
            </div>
            <div class="summary-card accent2">
                <h3>Total Disconnects</h3>
                <div class="value">12.6M</div>
            </div>
            <div class="summary-card accent3">
                <h3>Data Size</h3>
                <div class="value">93 GB</div>
            </div>
        </div>

        <!-- Key Insights -->
        <div class="insights">
            <h2>Key Insights</h2>
            <ul>
                <li><strong>Critical Issue on MS63870 & MS63871:</strong> Massive disconnect spike starting Jan 8, 2026 with 1.3M+ disconnects per day affecting nearly all stores (989/974 stores)</li>
                <li><strong>Pattern:</strong> Federation groups show uniform high disconnect rates (~5,500-7,200 avg/store) on main servers vs low rates (11-258 avg/store) on backup servers</li>
                <li><strong>Top Problem Stores:</strong> Store 29393 (29K disconnects), Store 26924 (15K), Store 58630/57419/51734 (15K each)</li>
                <li><strong>Error Types:</strong> 95%+ are connection failures, with TLS/SSL errors as secondary issue</li>
                <li><strong>Outage Correlation:</strong> Peak disconnect hours align across servers, suggesting infrastructure-level issues</li>
            </ul>
        </div>

        <!-- Server Comparison Chart -->
        <div class="chart-container">
            <h2 class="chart-title">Server Comparison</h2>
            <canvas id="serverComparisonChart"></canvas>
        </div>

        <!-- Charts Row -->
        <div class="chart-row">
            <div class="chart-container">
                <h2 class="chart-title">Disconnects by Server</h2>
                <canvas id="serverPieChart"></canvas>
            </div>
            <div class="chart-container">
                <h2 class="chart-title">Daily Disconnect Trend (All Servers)</h2>
                <canvas id="dailyTrendChart"></canvas>
            </div>
        </div>

        <!-- Federation Groups Comparison -->
        <div class="chart-container">
            <h2 class="chart-title">Federation Groups Comparison Across Servers</h2>
            <canvas id="fedGroupChart"></canvas>
        </div>

        <!-- Server Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('all')">All Servers</button>
            <button class="tab" onclick="showTab('ms63870')">MS63870</button>
            <button class="tab" onclick="showTab('ms63871')">MS63871</button>
            <button class="tab" onclick="showTab('ms563871')">MS563871</button>
            <button class="tab" onclick="showTab('ms58138')">MS58138</button>
        </div>

        <!-- All Servers Summary -->
        <div id="all" class="tab-content active">
            <div class="server-section">
                <h2 class="server-title">Combined Server Summary</h2>
                <table class="comparison-table">
                    <tr>
                        <th>Server</th>
                        <th>Files</th>
                        <th>Lines</th>
                        <th>Stores</th>
                        <th>Disconnects</th>
                        <th>Time Range</th>
                    </tr>
                    <tr>
                        <td>MS63870</td>
                        <td>5,419</td>
                        <td>300.5M</td>
                        <td>989</td>
                        <td class="critical">5,533,679</td>
                        <td>Dec 27 - Jan 11</td>
                    </tr>
                    <tr>
                        <td>MS63871</td>
                        <td>4,397</td>
                        <td>256.1M</td>
                        <td>974</td>
                        <td class="critical">6,930,778</td>
                        <td>Jan 4 - Jan 11</td>
                    </tr>
                    <tr>
                        <td>MS563871</td>
                        <td>198</td>
                        <td>468K</td>
                        <td>935</td>
                        <td class="warning">125,925</td>
                        <td>Dec 31 - Jan 11</td>
                    </tr>
                    <tr>
                        <td>MS58138</td>
                        <td>53</td>
                        <td>195K</td>
                        <td>794</td>
                        <td>45,369</td>
                        <td>Oct 14 - Oct 24</td>
                    </tr>
                </table>

                <h3 style="margin-top: 30px; color: var(--accent2);">Federation Groups by Server (stores/disconnects)</h3>
                <table class="comparison-table" style="font-size: 0.9em;">
                    <tr>
                        <th>Fed Group</th>
                        <th>MS563871</th>
                        <th>MS58138</th>
                        <th>MS63870</th>
                        <th>MS63871</th>
                    </tr>
                    <tr><td>SBUXSCRoleGroup0</td><td>91s/1,007dc</td><td>72s/3,013dc</td><td>97s/539,888dc</td><td>94s/665,108dc</td></tr>
                    <tr><td>SBUXSCRoleGroup1</td><td>93s/20,253dc</td><td>100s/20,336dc</td><td>98s/540,471dc</td><td>96s/686,299dc</td></tr>
                    <tr><td>SBUXSCRoleGroup2</td><td>98s/4,630dc</td><td>65s/7,547dc</td><td>100s/594,993dc</td><td>99s/700,623dc</td></tr>
                    <tr><td>SBUXSCRoleGroup3</td><td>92s/2,306dc</td><td>86s/945dc</td><td>97s/534,926dc</td><td>99s/698,886dc</td></tr>
                    <tr><td>SBUXSCRoleGroup4</td><td>94s/20,182dc</td><td>86s/1,354dc</td><td>100s/574,936dc</td><td>96s/687,947dc</td></tr>
                    <tr><td>SBUXSCRoleGroup5</td><td>100s/2,288dc</td><td>85s/6,172dc</td><td>104s/575,220dc</td><td>101s/712,770dc</td></tr>
                    <tr><td>SBUXSCRoleGroup6</td><td>94s/42,102dc</td><td>90s/1,192dc</td><td>97s/538,069dc</td><td>98s/712,741dc</td></tr>
                    <tr><td>SBUXSCRoleGroup7</td><td>96s/2,469dc</td><td>87s/737dc</td><td>98s/541,396dc</td><td>97s/684,701dc</td></tr>
                    <tr><td>SBUXSCRoleGroup8</td><td>96s/19,153dc</td><td>84s/2,203dc</td><td>98s/540,635dc</td><td>98s/700,591dc</td></tr>
                    <tr><td>SBUXSCRoleGroup9</td><td>93s/11,535dc</td><td>87s/1,870dc</td><td>98s/541,773dc</td><td>96s/681,112dc</td></tr>
                </table>
            </div>
        </div>

        <!-- MS63870 -->
        <div id="ms63870" class="tab-content">
            <div class="server-section" style="border-left-color: #ff6384;">
                <h2 class="server-title">MS63870 - Primary Federation Server</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Time Range: Dec 27, 2025 - Jan 11, 2026 | 5,419 files | 300.5M lines | 989 stores | 5.5M disconnects
                </p>

                <h3 style="color: var(--accent2); margin-top: 20px;">Top 20 Stores by Disconnect Count</h3>
                <table>
                    <tr><th>Rank</th><th>Store</th><th>Disconnects</th><th>Federation Group</th></tr>
                    <tr><td>1</td><td class="highlight">29393</td><td class="critical">29,235</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>2</td><td>26924</td><td class="critical">14,686</td><td>SBUXSCRoleGroup2</td></tr>
                    <tr><td>3</td><td>25466</td><td class="warning">10,653</td><td>SBUXSCRoleGroup0</td></tr>
                    <tr><td>4</td><td>48156</td><td class="warning">9,023</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>5</td><td>29793</td><td>6,653</td><td>SBUXSCRoleGroup5</td></tr>
                    <tr><td>6</td><td>48923</td><td>6,513</td><td>SBUXSCRoleGroup7</td></tr>
                    <tr><td>7</td><td>29374</td><td>6,462</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>8</td><td>49896</td><td>6,445</td><td>SBUXSCRoleGroup9</td></tr>
                    <tr><td>9</td><td>26926</td><td>6,348</td><td>SBUXSCRoleGroup2</td></tr>
                    <tr><td>10</td><td>26561</td><td>6,233</td><td>SBUXSCRoleGroup1</td></tr>
                </table>

                <h3 style="color: var(--accent2); margin-top: 20px;">Longest Disconnection Times</h3>
                <table>
                    <tr><th>Store</th><th>Max</th><th>Avg</th><th>Count</th><th>Fed Group</th></tr>
                    <tr><td>25937</td><td class="critical">8.1h</td><td>4.1h</td><td>2</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>29086</td><td class="critical">6.0h</td><td>1.1h</td><td>6</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>29497</td><td>1.4h</td><td>1.4h</td><td>2</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>49896</td><td>1.1h</td><td>1.2m</td><td>93</td><td>SBUXSCRoleGroup9</td></tr>
                    <tr><td>48156</td><td>42.7m</td><td>38s</td><td>1,061</td><td>SBUXSCRoleGroup6</td></tr>
                </table>
            </div>
        </div>

        <!-- MS63871 -->
        <div id="ms63871" class="tab-content">
            <div class="server-section" style="border-left-color: #36a2eb;">
                <h2 class="server-title">MS63871 - Secondary Federation Server</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Time Range: Jan 4 - Jan 11, 2026 | 4,397 files | 256.1M lines | 974 stores | 6.9M disconnects
                </p>

                <h3 style="color: var(--accent2); margin-top: 20px;">Top 20 Stores by Disconnect Count</h3>
                <table>
                    <tr><th>Rank</th><th>Store</th><th>Disconnects</th><th>Federation Group</th></tr>
                    <tr><td>1</td><td class="highlight">58630</td><td class="critical">15,359</td><td>SBUXSCRoleGroup8</td></tr>
                    <tr><td>2</td><td>57419</td><td class="critical">15,358</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>3</td><td>51734</td><td class="critical">15,350</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>4</td><td>57282</td><td class="critical">14,608</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>5</td><td>56762</td><td class="warning">9,840</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>6</td><td>53591</td><td class="warning">9,078</td><td>SBUXSCRoleGroup2</td></tr>
                    <tr><td>7</td><td>56881</td><td class="warning">8,800</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>8</td><td>58910</td><td class="warning">8,504</td><td>SBUXSCRoleGroup9</td></tr>
                    <tr><td>9</td><td>54605</td><td>7,548</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>10</td><td>52398</td><td>7,447</td><td>SBUXSCRoleGroup2</td></tr>
                </table>

                <h3 style="color: var(--accent2); margin-top: 20px;">Longest Disconnection Times</h3>
                <table>
                    <tr><th>Store</th><th>Max</th><th>Avg</th><th>Count</th><th>Fed Group</th></tr>
                    <tr><td>56075</td><td>1.8h</td><td>18.4m</td><td>6</td><td>SBUXSCRoleGroup5</td></tr>
                    <tr><td>53864</td><td>1.8h</td><td>21.9m</td><td>5</td><td>SBUXSCRoleGroup3</td></tr>
                    <tr><td>55030</td><td>1.8h</td><td>12.5m</td><td>9</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>50827</td><td>1.8h</td><td>14.1m</td><td>8</td><td>SBUXSCRoleGroup0</td></tr>
                </table>
            </div>
        </div>

        <!-- MS563871 -->
        <div id="ms563871" class="tab-content">
            <div class="server-section" style="border-left-color: #ffce56;">
                <h2 class="server-title">MS563871 - Backup Federation Server</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Time Range: Dec 31, 2025 - Jan 11, 2026 | 198 files | 468K lines | 935 stores | 126K disconnects
                </p>

                <h3 style="color: var(--accent2); margin-top: 20px;">Top 10 Stores by Disconnect Count</h3>
                <table>
                    <tr><th>Rank</th><th>Store</th><th>Disconnects</th><th>Federation Group</th></tr>
                    <tr><td>1</td><td class="highlight">51734</td><td class="critical">18,312</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>2</td><td>55244</td><td class="critical">18,311</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>3</td><td>58630</td><td class="critical">18,311</td><td>SBUXSCRoleGroup8</td></tr>
                    <tr><td>4</td><td>58910</td><td class="warning">10,600</td><td>SBUXSCRoleGroup9</td></tr>
                    <tr><td>5</td><td>57282</td><td class="warning">10,475</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>6</td><td>56762</td><td class="warning">9,267</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>7</td><td>53591</td><td>2,832</td><td>SBUXSCRoleGroup2</td></tr>
                    <tr><td>8</td><td>56881</td><td>2,479</td><td>SBUXSCRoleGroup6</td></tr>
                </table>
            </div>
        </div>

        <!-- MS58138 -->
        <div id="ms58138" class="tab-content">
            <div class="server-section" style="border-left-color: #4bc0c0;">
                <h2 class="server-title">MS58138 - Archive Server (Oct 2025)</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Time Range: Oct 14 - Oct 24, 2025 | 53 files | 195K lines | 794 stores | 45K disconnects
                </p>

                <h3 style="color: var(--accent2); margin-top: 20px;">Top 10 Stores by Disconnect Count</h3>
                <table>
                    <tr><th>Rank</th><th>Store</th><th>Disconnects</th><th>Federation Group</th></tr>
                    <tr><td>1</td><td class="highlight">00420</td><td>4,458</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>2</td><td>00439</td><td>4,457</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>3</td><td>00471</td><td>4,116</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>4</td><td>00458</td><td>3,365</td><td>SBUXSCRoleGroup1</td></tr>
                    <tr><td>5</td><td>00587</td><td>3,158</td><td>SBUXSCRoleGroup2</td></tr>
                </table>

                <h3 style="color: var(--accent2); margin-top: 20px;">Longest Disconnection Times</h3>
                <table>
                    <tr><th>Store</th><th>Max</th><th>Avg</th><th>Count</th><th>Fed Group</th></tr>
                    <tr><td>00246</td><td class="critical">12.1h</td><td>12.1h</td><td>1</td><td>SBUXSCRoleGroup0</td></tr>
                    <tr><td>02252</td><td class="critical">12.0h</td><td>6.0h</td><td>2</td><td>SBUXSCRoleGroup4</td></tr>
                    <tr><td>02670</td><td class="critical">11.9h</td><td>8.0h</td><td>3</td><td>SBUXSCRoleGroup6</td></tr>
                    <tr><td>02938</td><td class="critical">11.2h</td><td>5.6h</td><td>2</td><td>SBUXSCRoleGroup8</td></tr>
                </table>
            </div>
        </div>

        <!-- Error Analysis -->
        <div class="chart-container">
            <h2 class="chart-title">Error Analysis by Server</h2>
            <canvas id="errorChart"></canvas>
        </div>

        <footer style="text-align: center; color: var(--text-secondary); margin-top: 40px; padding: 20px;">
            Generated by Federation Log Analyzer v3 (Streaming) | Multi-Server Analysis | 557M lines processed
        </footer>
    </div>

    <script>
        // Tab functionality
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Server Comparison Bar Chart
        new Chart(document.getElementById('serverComparisonChart'), {
            type: 'bar',
            data: {
                labels: ['MS63871', 'MS63870', 'MS563871', 'MS58138'],
                datasets: [{
                    label: 'Disconnects (millions)',
                    data: [6.93, 5.53, 0.126, 0.045],
                    backgroundColor: ['#36a2eb', '#ff6384', '#ffce56', '#4bc0c0'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'Total Disconnects by Server (Millions)', color: '#eee' }
                },
                scales: {
                    y: { ticks: { color: '#aaa' }, grid: { color: '#333' } },
                    x: { ticks: { color: '#aaa' }, grid: { color: '#333' } }
                }
            }
        });

        // Server Pie Chart
        new Chart(document.getElementById('serverPieChart'), {
            type: 'doughnut',
            data: {
                labels: ['MS63871 (55%)', 'MS63870 (44%)', 'MS563871 (1%)', 'MS58138 (<1%)'],
                datasets: [{
                    data: [6930778, 5533679, 125925, 45369],
                    backgroundColor: ['#36a2eb', '#ff6384', '#ffce56', '#4bc0c0'],
                    borderWidth: 2,
                    borderColor: '#1a1a2e'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'right', labels: { color: '#eee' } }
                }
            }
        });

        // Daily Trend Chart
        new Chart(document.getElementById('dailyTrendChart'), {
            type: 'line',
            data: {
                labels: ['Dec 27', 'Dec 28', 'Dec 29', 'Dec 30', 'Dec 31', 'Jan 1', 'Jan 2', 'Jan 3', 'Jan 4', 'Jan 5', 'Jan 6', 'Jan 7', 'Jan 8', 'Jan 9', 'Jan 10', 'Jan 11'],
                datasets: [{
                    label: 'MS63870',
                    data: [3508, 4642, 6269, 5858, 4547, 3690, 4340, 5571, 5173, 6015, 5989, 8113, 1240474, 1434446, 1434397, 1360647],
                    borderColor: '#ff6384',
                    fill: false,
                    tension: 0.3
                }, {
                    label: 'MS63871',
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 89332, 556566, 262417, 1308879, 798684, 1333136, 1242647, 1339117],
                    borderColor: '#36a2eb',
                    fill: false,
                    tension: 0.3
                }, {
                    label: 'MS563871',
                    data: [0, 0, 0, 0, 552, 11825, 11055, 9989, 9454, 12016, 13315, 12630, 13566, 12480, 9438, 9605],
                    borderColor: '#ffce56',
                    fill: false,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { labels: { color: '#eee' } },
                    title: { display: true, text: 'Disconnect Trend Over Time', color: '#eee' }
                },
                scales: {
                    y: {
                        ticks: { color: '#aaa', callback: v => v >= 1000000 ? (v/1000000).toFixed(1)+'M' : v >= 1000 ? (v/1000).toFixed(0)+'K' : v },
                        grid: { color: '#333' }
                    },
                    x: { ticks: { color: '#aaa' }, grid: { color: '#333' } }
                }
            }
        });

        // Federation Group Comparison
        new Chart(document.getElementById('fedGroupChart'), {
            type: 'bar',
            data: {
                labels: ['Group0', 'Group1', 'Group2', 'Group3', 'Group4', 'Group5', 'Group6', 'Group7', 'Group8', 'Group9'],
                datasets: [{
                    label: 'MS63870',
                    data: [539888, 540471, 594993, 534926, 574936, 575220, 538069, 541396, 540635, 541773],
                    backgroundColor: '#ff6384'
                }, {
                    label: 'MS63871',
                    data: [665108, 686299, 700623, 698886, 687947, 712770, 712741, 684701, 700591, 681112],
                    backgroundColor: '#36a2eb'
                }, {
                    label: 'MS563871',
                    data: [1007, 20253, 4630, 2306, 20182, 2288, 42102, 2469, 19153, 11535],
                    backgroundColor: '#ffce56'
                }, {
                    label: 'MS58138',
                    data: [3013, 20336, 7547, 945, 1354, 6172, 1192, 737, 2203, 1870],
                    backgroundColor: '#4bc0c0'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { labels: { color: '#eee' } }
                },
                scales: {
                    y: {
                        stacked: false,
                        ticks: { color: '#aaa', callback: v => v >= 1000000 ? (v/1000000).toFixed(1)+'M' : v >= 1000 ? (v/1000).toFixed(0)+'K' : v },
                        grid: { color: '#333' }
                    },
                    x: { ticks: { color: '#aaa' }, grid: { color: '#333' } }
                }
            }
        });

        // Error Analysis
        new Chart(document.getElementById('errorChart'), {
            type: 'bar',
            data: {
                labels: ['MS63870', 'MS63871', 'MS563871', 'MS58138'],
                datasets: [{
                    label: 'Connection Failed',
                    data: [100764, 56139, 125925, 45369],
                    backgroundColor: '#ff6384'
                }, {
                    label: 'TLS/SSL Errors',
                    data: [197, 2365, 8330, 2548],
                    backgroundColor: '#ffce56'
                }, {
                    label: 'Timeouts',
                    data: [0, 0, 0, 14],
                    backgroundColor: '#4bc0c0'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { labels: { color: '#eee' } }
                },
                scales: {
                    y: {
                        stacked: true,
                        ticks: { color: '#aaa', callback: v => v >= 1000 ? (v/1000).toFixed(0)+'K' : v },
                        grid: { color: '#333' }
                    },
                    x: { stacked: true, ticks: { color: '#aaa' }, grid: { color: '#333' } }
                }
            }
        });
    </script>
</body>
</html>
